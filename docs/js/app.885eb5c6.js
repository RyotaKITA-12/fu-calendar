(function(){"use strict";var e={7360:function(e,t,a){var s=a(144),r=a(998),i=a(3059),o=function(){var e=this,t=e._self._c;return t(r.Z,[t(i.Z,[t("router-view")],1)],1)},n=[],l={name:"App"},c=l,d=a(1001),u=(0,d.Z)(c,o,n,!1,null,null,null),p=u.exports,m=a(8345),h=a(6190),g=a(5715),f=a(4145),v=a(4886),_=a(2118),y=a(4324),Z=a(5808),b=a(4525),x=a(9500),k=a(4528),w=a(7423),S=a(3687),D=a(6313),C=a(7953),E=function(){var e=this,t=e._self._c;return t(r.Z,{attrs:{id:"inspire"}},[t("Nav"),t(i.Z,{staticClass:"grey lighten-3"},[t(_.Z,[t("AddSchedule",{on:{getSchedule:e.getSchedule}}),t(w.Z,{attrs:{"min-height":"70vh",rounded:"lg"}},[t(w.Z,{staticClass:"d-flex",attrs:{tile:"",height:"64"}},[t(D.Z,{attrs:{flat:""}},[t(h.Z,{staticClass:"mr-4",attrs:{outlined:"",color:"grey darken-2"},on:{click:e.setToday}},[e._v(" Today ")]),t(h.Z,{attrs:{fab:"",text:"",small:"",color:"grey darken-2"},on:{click:e.prev}},[t(y.Z,{attrs:{small:""}},[e._v(" mdi-chevron-left ")])],1),t(h.Z,{attrs:{fab:"",text:"",small:"",color:"grey darken-2"},on:{click:e.next}},[t(y.Z,{attrs:{small:""}},[e._v(" mdi-chevron-right ")])],1),e.$refs.calendar?t(C.qW,[e._v(" "+e._s(e.$refs.calendar.title)+" ")]):e._e(),t(S.Z),t(k.Z,{attrs:{bottom:"",right:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t(h.Z,e._g(e._b({attrs:{outlined:"",color:"grey darken-2"}},"v-btn",s,!1),a),[t("span",[e._v(e._s(e.typeToLabel[e.type]))]),t(y.Z,{attrs:{right:""}},[e._v(" mdi-menu-down ")])],1)]}}])},[t(Z.Z,[t(b.Z,{on:{click:function(t){e.type="day"}}},[t(x.V9,[e._v("Day")])],1),t(b.Z,{on:{click:function(t){e.type="week"}}},[t(x.V9,[e._v("Week")])],1),t(b.Z,{on:{click:function(t){e.type="month"}}},[t(x.V9,[e._v("Month")])],1)],1)],1)],1)],1),t(w.Z,{attrs:{height:"600"}},[t(g.Z,{ref:"calendar",attrs:{type:e.type,events:e.events,"event-overlap-mode":e.mode,"event-overlap-threshold":30},on:{"click:event":e.showEvent},model:{value:e.focus,callback:function(t){e.focus=t},expression:"focus"}}),t(k.Z,{attrs:{"close-on-content-click":!1,activator:e.selectedElement,"offset-x":""},model:{value:e.selectedOpen,callback:function(t){e.selectedOpen=t},expression:"selectedOpen"}},[t(f.Z,{attrs:{color:"grey lighten-4","min-width":"350px",flat:""}},[t(D.Z,{attrs:{color:e.selectedEvent.color,dark:""}},[t(y.Z,{staticStyle:{"margin-bottom":"3px","margin-right":"20px"}},[e._v(e._s(e.category_icons[e.selectedEvent.category]))]),t(C.qW,{domProps:{innerHTML:e._s(e.selectedEvent.name)}}),t(S.Z),t(h.Z,{attrs:{icon:"",color:"white"},on:{click:function(t){return e.deleteSchedule(e.selectedEvent.id)}}},[t(y.Z,[e._v("mdi-delete")])],1)],1),t(v.ZB,[t("b",[e._v(" "+e._s(e.selectedEvent.content)+" ")]),t("br"),e._v(" START　: "+e._s(e.formatDate(e.selectedEvent.start))+" "),t("br"),e._v(" END　　: "+e._s(e.formatDate(e.selectedEvent.end))+" ")]),t(v.h7,[t(h.Z,{attrs:{text:"",color:"secondary"},on:{click:function(t){e.selectedOpen=!1}}},[e._v(" Cancel ")]),t(S.Z)],1)],1)],1)],1)],1)],1)],1)],1)},M=[],O=a(9669),T=a.n(O),N=a(6232),I=a(5550),U=a(3423),$=a(3272),A=a(5495),P=a(7397),F=a(7912),G=a(4611),R=a(9709),L=function(){var e=this,t=e._self._c;return e.windowWidth>870?t("div",[t(N.Z,{attrs:{app:"",color:"white",flat:""}},[t(_.Z,{staticClass:"py-0 fill-height"},[t("router-link",{attrs:{to:"/"}},[t(A.Z,{attrs:{to:"/","max-height":"50","max-width":"160",src:a(6949),"lazy-src":a(3976)}})],1),t(S.Z),t(h.Z,{attrs:{to:"/",small:"",text:"","active-class":"deep-purple--text"}},[t(y.Z,[e._v("mdi-home-account")]),e._v(" MYPAGE ")],1),t(h.Z,{attrs:{to:"/friend",small:"",text:"","active-class":"deep-purple--text"}},[t(y.Z,[e._v("mdi-account")]),e._v(" FRIEND ")],1),t(h.Z,{attrs:{to:"/group",small:"",text:"","active-class":"deep-purple--text"}},[t(y.Z,[e._v("mdi-account-multiple")]),e._v(" GROUP ")],1),t("div",{staticClass:"text-center"},[t(k.Z,{attrs:{"open-on-hover":"","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t(h.Z,e._g(e._b({attrs:{small:"",to:"/search",text:"","active-class":"deep-purple--text"}},"v-btn",s,!1),a),[0==e.notification?t("div",[t(y.Z,[e._v("mdi-magnify")]),e._v(" SEARCH ")],1):t($.Z,{attrs:{color:"green",content:e.notification}},[t(y.Z,[e._v("mdi-magnify")]),e._v(" SEARCH ")],1)],1)]}}],null,!1,468585091)})],1),t(h.Z,{attrs:{color:"red",small:"",text:""},on:{click:e.signOut}},[t(y.Z,[e._v("mdi-logout")]),e._v(" LOGOUT ")],1),t(U.Z,{staticClass:"mr-10",staticStyle:{"margin-left":"20px"},attrs:{color:"grey darken-1",size:"40"}},[t("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/jpg, image/jpeg, image/png"},on:{change:e.updateIcon}}),e.photoUrl?e._e():t(y.Z,{attrs:{dark:""},on:{click:e.changeIcon}},[e._v(" mdi-account-circle ")]),e.photoUrl?t("img",{attrs:{src:e.photoUrl},on:{click:e.changeIcon}}):e._e()],1)],1)],1)],1):t("div",[t(N.Z,{attrs:{app:"",color:"white",flat:""}},[t(_.Z,{staticClass:"py-0 fill-height"},[t("router-link",{attrs:{to:"/"}},[t(A.Z,{attrs:{to:"/","max-height":"50","max-width":"140",src:a(6949),"lazy-src":a(3976)}})],1),t(S.Z),t(h.Z,{attrs:{color:"red",text:""},on:{click:e.signOut}},[t(y.Z,[e._v("mdi-logout")]),e._v(" LOGOUT ")],1),t(U.Z,{staticClass:"mr-10",staticStyle:{"margin-left":"20px"},attrs:{color:"grey darken-1",size:"48"}},[t("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/jpg, image/jpeg, image/png"},on:{change:e.updateIcon}}),e.photoUrl?e._e():t(y.Z,{attrs:{dark:""},on:{click:e.changeIcon}},[e._v(" mdi-account-circle ")]),e.photoUrl?t("img",{attrs:{src:e.photoUrl},on:{click:e.changeIcon}}):e._e()],1),t(I.Z,{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}})],1)],1),t(R.Z,{attrs:{absolute:"",temporary:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[t(Z.Z,{attrs:{nav:"",dense:""}},[t(F.Z,{attrs:{"active-class":"deep-purple--text text--accent-4"},model:{value:e.group,callback:function(t){e.group=t},expression:"group"}},[t(b.Z,{attrs:{to:"/"}},[t(G.Z,[t(y.Z,[e._v("mdi-home-account")])],1),t(x.V9,[e._v("マイページ")])],1),t(P.Z,{attrs:{value:e.active,disabled:"","no-action":"","prepend-icon":"mdi-account-cog"},scopedSlots:e._u([{key:"activator",fn:function(){return[t(x.km,[t(x.V9,[e._v("フレンド")])],1)]},proxy:!0}])},[t(b.Z,[t(b.Z,{attrs:{to:"/friend"}},[t(G.Z,[t(y.Z,[e._v("mdi-account")])],1),t(x.V9,[e._v("フレンドの管理")])],1)],1),t(b.Z,[t(b.Z,{attrs:{to:"/group"}},[t(G.Z,[t(y.Z,[e._v("mdi-account-multiple")])],1),t(x.V9,[e._v("グループの管理")])],1)],1)],1),t(b.Z,{attrs:{to:"/search"}},[t(G.Z,[t(y.Z,[e._v("mdi-clock")])],1),t(x.V9,[e._v("検索")])],1)],1)],1)],1)],1)},Y=[],W=a(8844);const V={apiKey:"AIzaSyBRrMJIQPsP3X8ul77SEoFtrcGT-ID7ndQ",authDomain:"fu-calendar-9acef.firebaseapp.com",projectId:"fu-calendar-9acef",storageBucket:"fu-calendar-9acef.appspot.com",messagingSenderId:"58740389288",appId:"1:58740389288:web:cb8e51e15153d84e6a999d",measurementId:"G-HNXD2RKBW7"};W.Z.initializeApp(V);var j=W.Z,q={name:"App",data:()=>({friends:[{icon:"mdi-account",text:"フレンドの管理",link:"/friend"},{icon:"mdi-account-multiple",text:"グループの管理",link:"/group"}],auth:null,photoUrl:"",windowWidth:0,drawer:!1,group:null,active:!0,notification:0}),watch:{group(){this.drawer=!1}},mounted(){window.addEventListener("resize",this.calculateWindowWidth),this.calculateWindowWidth(),this.auth=JSON.parse(sessionStorage.getItem("user")),this.photoUrl=this.auth.photoURL},beforeDestroy(){window.removeEventListener("resize",this.calculateWindowWidth)},methods:{signOut(){j.auth().signOut().then((()=>{localStorage.message="ログアウトに成功しました",this.$router.push("/signin")}))},changeIcon(){this.$refs.fileInput.click()},getAuth(){return j.auth().onAuthStateChanged((e=>e))},updateIcon(){const e=this.getAuth();e||(sessionStorage.removeItem("user"),this.$router.push("/signin"));const t=this.$refs.fileInput.files[0],a=JSON.parse(sessionStorage.getItem("user")),s=`/user/icon/${a.displayName}`;j.storage().ref().child(s).put(t).then((async e=>{const t=await e.ref.getDownloadURL();j.auth().onAuthStateChanged((e=>{e&&e.updateProfile({photoURL:t})})),this.auth.photoURL=t,sessionStorage.setItem("user",JSON.stringify(this.auth)),this.photoUrl=t}))},calculateWindowWidth(){this.windowWidth=window.innerWidth}}},z=q,J=(0,d.Z)(z,L,Y,!1,null,null,null),H=J.exports,B=a(266),K=a(8486),X=a(4061),Q=a(1713),ee=a(1399),te=a(7808),ae=a(6072),se=a(8695),re=function(){var e=this,t=e._self._c;return t(Q.Z,{attrs:{justify:"end"}},[t(X.Z,{attrs:{persistent:"","max-width":"600px"},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t("div",{staticStyle:{"padding-bottom":"20px","padding-right":"20px"}},[t(h.Z,e._g(e._b({staticClass:"text-center v-btn--example",attrs:{fab:"",large:"",dark:"",right:"",color:"indigo"}},"v-btn",s,!1),a),[t(y.Z,[e._v("mdi-plus")])],1)],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(f.Z,[t(v.EB,[t("span",{staticClass:"text-h5"},[e._v("New Event")])]),t(v.ZB,[t(_.Z,[t(Q.Z,{attrs:{justify:"center"}},[t(B.Z,{attrs:{cols:"10"}},[t(te.Z,{attrs:{label:"Title","prepend-icon":"mdi-pencil",required:""},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1),t(B.Z,{attrs:{cols:"5"}},[t(k.Z,{ref:"dateStartMenu",attrs:{"close-on-content-click":!1,"return-value":e.addDate.start,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(t){return e.$set(e.addDate,"start",t)},"update:return-value":function(t){return e.$set(e.addDate,"start",t)}},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t(te.Z,e._g(e._b({attrs:{label:"Start Date","prepend-icon":"mdi-calendar",readonly:""},model:{value:e.addDate.start,callback:function(t){e.$set(e.addDate,"start",t)},expression:"addDate.start"}},"v-text-field",s,!1),a))]}}])},[t(K.Z,{attrs:{"no-title":"",scrollable:""},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}},[t(S.Z),t(h.Z,{attrs:{text:"",color:"primary"},on:{click:function(t){e.$refs.dateStartMenu.isActive=!1}}},[e._v(" Cancel ")]),t(h.Z,{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.dateStartMenu.save(e.date)}}},[e._v(" OK ")])],1)],1)],1),t(B.Z,{attrs:{cols:"5"}},[t(k.Z,{ref:"timeStartMenu",attrs:{"close-on-content-click":!1,"return-value":e.addTime.start,"offset-y":"","min-width":"290px"},on:{"update:returnValue":function(t){return e.$set(e.addTime,"start",t)},"update:return-value":function(t){return e.$set(e.addTime,"start",t)}},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t(te.Z,e._g(e._b({attrs:{label:"Start time","prepend-icon":"mdi-clock-time-four-outline",readonly:""},model:{value:e.addTime.start,callback:function(t){e.$set(e.addTime,"start",t)},expression:"addTime.start"}},"v-text-field",s,!1),a))]}}])},[t(se.Z,{staticClass:"mt-4",attrs:{"allowed-minutes":e.allowedStep,format:"24hr"},model:{value:e.timeStep,callback:function(t){e.timeStep=t},expression:"timeStep"}},[t(S.Z),t(h.Z,{attrs:{text:"",color:"primary"},on:{click:function(t){e.$refs.timeStartMenu.isActive=!1}}},[e._v(" Cancel ")]),t(h.Z,{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.timeStartMenu.save(e.timeStep)}}},[e._v(" OK ")])],1)],1)],1),t(B.Z,{attrs:{cols:"5"}},[t(k.Z,{ref:"dateEndMenu",attrs:{"close-on-content-click":!1,"return-value":e.addDate.end,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(t){return e.$set(e.addDate,"end",t)},"update:return-value":function(t){return e.$set(e.addDate,"end",t)}},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t(te.Z,e._g(e._b({attrs:{label:"End Date","prepend-icon":"mdi-calendar",readonly:""},model:{value:e.addDate.end,callback:function(t){e.$set(e.addDate,"end",t)},expression:"addDate.end"}},"v-text-field",s,!1),a))]}}])},[t(K.Z,{attrs:{"no-title":"",scrollable:""},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}},[t(S.Z),t(h.Z,{attrs:{text:"",color:"primary"},on:{click:function(t){e.$refs.dateEndMenu.isActive=!1}}},[e._v(" Cancel ")]),t(h.Z,{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.dateEndMenu.save(e.date)}}},[e._v(" OK ")])],1)],1)],1),t(B.Z,{attrs:{cols:"5"}},[t(k.Z,{ref:"timeEndMenu",attrs:{"close-on-content-click":!1,"return-value":e.addTime.end,"offset-y":"","min-width":"290px"},on:{"update:returnValue":function(t){return e.$set(e.addTime,"end",t)},"update:return-value":function(t){return e.$set(e.addTime,"end",t)}},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t(te.Z,e._g(e._b({attrs:{label:"End time","prepend-icon":"mdi-clock-time-four-outline",readonly:""},model:{value:e.addTime.end,callback:function(t){e.$set(e.addTime,"end",t)},expression:"addTime.end"}},"v-text-field",s,!1),a))]}}])},[t(se.Z,{staticClass:"mt-4",attrs:{"allowed-minutes":e.allowedStep,format:"24hr"},model:{value:e.timeStep,callback:function(t){e.timeStep=t},expression:"timeStep"}},[t(S.Z),t(h.Z,{attrs:{text:"",color:"primary"},on:{click:function(t){e.$refs.timeEndMenu.isActive=!1}}},[e._v(" Cancel ")]),t(h.Z,{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.timeEndMenu.save(e.timeStep)}}},[e._v(" OK ")])],1)],1)],1),t(B.Z,{attrs:{cols:"10"}},[t(ee.Z,{attrs:{items:e.groups,label:"Group","prepend-icon":"mdi-account-multiple",dense:""},model:{value:e.group,callback:function(t){e.group=t},expression:"group"}})],1),t(B.Z,{attrs:{cols:"10"}},[t(ee.Z,{attrs:{items:e.categorys,label:"Category","prepend-icon":"mdi-shape",dense:""},model:{value:e.category,callback:function(t){e.category=t},expression:"category"}})],1),t(B.Z,{attrs:{cols:"10"}},[t(ae.Z,{attrs:{filled:"","auto-grow":"",rows:"2",label:"Content",rules:e.rules},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})],1)],1)],1)],1),t(v.h7,[t(S.Z),t(h.Z,{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.dialog=!1}}},[e._v(" Close ")]),t(h.Z,{attrs:{color:"blue darken-1",text:""},on:{click:e.onSubmit}},[e._v(" Save ")])],1)],1)],1)],1)},ie=[],oe={data:()=>({dialog:!1,title:"",addDate:{start:null,end:null},addTime:{start:null,end:null},timeStep:null,group:[],groups:[],category:null,categorys:["指定なし","遊び","ゲーム","作業","散歩","仕事","食事","ショッピング","スポーツ","通話","デート","ドライブ","飲み","博物館","旅行","その他"],content:"",events:[],auth:null}),mounted(){this.auth=JSON.parse(sessionStorage.getItem("user")),this.getGroups()},methods:{allowedStep:e=>e%15===0,async getGroups(){await T().post("/groups",{host_id:this.auth.displayName}).then((e=>{this.groups=[],e.data.forEach((e=>{this.groups.push(e.group_name)}))})).catch((e=>{console.log(e)}))},async onSubmit(){var e=new Date(this.addDate.start+"T"+this.addTime.start),t=`${e}`;console.log(t);var a=new Date(this.addDate.end+"T"+this.addTime.end),s=`${a}`;await T().post("/register/schedule",{user_id:this.auth.displayName,title:this.title,group:this.group,category:this.category,content:this.content,start:t,end:s}).then((e=>{this.$emit("getSchedule")})).catch((e=>{console.log(e)})),this.dialog=!1}}},ne=oe,le=(0,d.Z)(ne,re,ie,!1,null,null,null),ce=le.exports,de={components:{Nav:H,AddSchedule:ce},data:()=>({focus:"",type:"month",typeToLabel:{month:"Month",week:"Week",day:"Day"},mode:"column",value:"",events:[],auth:null,selectedEvent:{},selectedElement:null,selectedOpen:!1,category_icons:{"指定なし":"mdi-note","遊び":"mdi-golf","ゲーム":"mdi-controller","作業":"mdi-desk","散歩":"mdi-walk","仕事":"mdi-office-building","食事":"mdi-food","ショッピング":"mdi-shopping","スポーツ":"mdi-baseball-bat","通話":"mdi-phone","デート":"mdi-heart-multiple","ドライブ":"mdi-car","飲み":"mdi-glass-wine","博物館":"mdi-palette","旅行":"mdi-train","その他":"mdi-dots-horizontal"},category_colors:{"指定なし":"yellow darken-2","遊び":"deep-orange","ゲーム":"light-blue","作業":"purple","散歩":"green","仕事":"black","食事":"red","ショッピング":"amber","スポーツ":"cyan","通話":"lime","デート":"pink","ドライブ":"indigo","飲み":"brown","博物館":"deep-purple","旅行":"teal","その他":"blue-grey"}}),mounted(){this.$refs.calendar.checkChange(),this.auth=JSON.parse(sessionStorage.getItem("user")),this.getSchedule()},methods:{setToday(){this.focus=""},prev(){this.$refs.calendar.prev()},next(){this.$refs.calendar.next()},async deleteSchedule(e){console.log(e),await T().post("/delete/schedule",{id:String(e)}).then((e=>{this.getSchedule()})).catch((e=>{console.log(e)}))},async getSchedule(){this.events=[],await T().post("/schedules",{user_id:this.auth.displayName}).then((e=>{e.data.forEach((e=>{var t={id:e.ID,name:e.title,start:new Date(e.start.slice(0,-1)),end:new Date(e.end.slice(0,-1)),group:e.group,category:e.category,content:e.content,color:this.category_colors[e.category],timed:!0};this.events.push(t)}))})).catch((e=>{console.log(e)}))},showEvent({nativeEvent:e,event:t}){const a=()=>{this.selectedEvent=t,this.selectedElement=e.target,requestAnimationFrame((()=>requestAnimationFrame((()=>this.selectedOpen=!0))))};this.selectedOpen?(this.selectedOpen=!1,requestAnimationFrame((()=>requestAnimationFrame((()=>a()))))):a(),e.stopPropagation()},formatDate(e){var t="YYYY/MM/DD hh:mm:ss",a=new Date(e);return t=t.replace(/YYYY/g,a.getFullYear()),t=t.replace(/MM/g,("0"+(a.getMonth()+1)).slice(-2)),t=t.replace(/DD/g,("0"+a.getDate()).slice(-2)),t=t.replace(/hh/g,("0"+a.getHours()).slice(-2)),t=t.replace(/mm/g,("0"+a.getMinutes()).slice(-2)),t=t.replace(/ss/g,("0"+a.getSeconds()).slice(-2)),t}}},ue=de,pe=(0,d.Z)(ue,E,M,!1,null,null,null),me=pe.exports,he=a(3694),ge=a(9223),fe=function(){var e=this,t=e._self._c;return t(r.Z,{attrs:{id:"inspire"}},[t("Nav"),t(i.Z,{staticClass:"grey lighten-3"},[t(_.Z,[t(w.Z,{attrs:{"max-height":"80vh",rounded:"lg"}},[t(Q.Z,{attrs:{"no-gutters":""}},[t(B.Z,{attrs:{cols:"3"}},[t(f.Z,{staticClass:"mx-auto white",staticStyle:{"padding-top":"10px"},attrs:{"max-height":"52vh"}},[t(te.Z,{staticStyle:{"padding-top":"20px","padding-left":"10px","padding-right":"10px"},attrs:{label:"add UserID",type:"text"},scopedSlots:e._u([{key:"append-outer",fn:function(){return[t(h.Z,{attrs:{color:"primary"},on:{click:e.onSubmit}},[e._v("追加")])]},proxy:!0}]),model:{value:e.addUser,callback:function(t){e.addUser=t},expression:"addUser"}}),t(Z.Z,{staticStyle:{height:"42vh","overflow-y":"auto"},attrs:{color:"blue-grey lighten-5"}},[t(F.Z,{attrs:{color:"primary"},model:{value:e.selectedUser,callback:function(t){e.selectedUser=t},expression:"selectedUser"}},e._l(e.users,(function(a){return t(b.Z,{key:a,on:{click:e.selectUser}},[t(G.Z,[t(y.Z,[e._v("mdi-account")])],1),t(x.km,[t(x.V9,[e._v(e._s(a))])],1)],1)})),1)],1)],1),t(ge.Z),t(f.Z,{staticClass:"mx-auto",staticStyle:{"padding-top":"10px"},attrs:{color:"grey lighten-5","max-height":"33vh"}},[t("h3",{staticClass:"text-center indigo--text",staticStyle:{"padding-top":"10px","padding-bottom":"10px"}},[e._v(" もしかして友達かも...? ")]),t(Z.Z,{staticStyle:{height:"23vh","overflow-y":"auto"},attrs:{color:"blue-grey lighten-5"}},e._l(e.followers,(function(a){return t(b.Z,{key:a},[t(G.Z,[t(y.Z,[e._v("mdi-account")])],1),t(x.km,[t(x.V9,[e._v(e._s(a))])],1),t(h.Z,{attrs:{outlined:"",color:"primary"},on:{click:function(t){return e.addFriend(a)}}},[e._v("追加")])],1)})),1)],1)],1),t(B.Z,{staticStyle:{height:"80vh","overflow-y":"auto"}},e._l(e.applications,(function(a){return t("div",{staticStyle:{"margin-top":"15px"}},[a.host_id==e.auth.displayName?t("div",[t(he.Z,{key:a.application_id,staticClass:"mr-auto",staticStyle:{"border-radius":"30px",width:"70%","margin-left":"15px"},attrs:{dense:"",outlined:"",text:"",color:e.category_colors[a.category]}},[t("h4",{staticClass:"text-h5"},[t(y.Z,{staticStyle:{"margin-bottom":"5px","margin-right":"20px"},attrs:{color:e.category_colors[a.category]}},[e._v(" "+e._s(e.category_icons[a.category])+" ")]),t("b",[e._v(e._s(a.title))])],1),t(ge.Z,{staticClass:"my-1"}),t("div",[t("b",[e._v(" "+e._s(a.content)+" ")]),t("br"),e._v(" START　: "+e._s(e.formatDate(a.start_date))+" "),t("br"),e._v(" END　　: "+e._s(e.formatDate(a.end_date))+" ")]),t(ge.Z,{staticClass:"my-2"}),t(Q.Z,{attrs:{align:"center","no-gutters":""}},[t(B.Z,{attrs:{cols:"2"}},[e._v(" "+e._s(a.user_id)+" : ")]),t(B.Z,[e._v(" "+e._s(a.comment)+" ")]),t(S.Z),t(B.Z,{staticClass:"shrink"},[a.approved?t(h.Z,{attrs:{disabled:"",color:"info",outlined:""}},[t("b",[e._v("承認済")])]):t(h.Z,{attrs:{color:"info",outlined:""},on:{click:function(t){return e.applySchedule(a.application_id)}}},[t("b",[e._v("承認")])])],1)],1)],1)],1):t("div",[t(he.Z,{key:a.application_id,staticClass:"ml-auto",staticStyle:{"border-radius":"30px",width:"70%","margin-left":"15px"},attrs:{dense:"",outlined:"",text:"",color:e.category_colors[a.category]}},[t("h4",{staticClass:"text-h5"},[t(y.Z,{staticStyle:{"margin-bottom":"5px","margin-right":"20px"},attrs:{color:e.category_colors[a.category]}},[e._v(" "+e._s(e.category_icons[a.category])+" ")]),t("b",[e._v(e._s(a.title))])],1),t(ge.Z,{staticClass:"my-1"}),t("div",[t("b",[e._v(" "+e._s(a.content)+" ")]),t("br"),e._v(" START　: "+e._s(e.formatDate(a.start_date))+" "),t("br"),e._v(" END　　: "+e._s(e.formatDate(a.end_date))+" ")]),t(ge.Z,{staticClass:"my-2"}),t(Q.Z,{attrs:{align:"center","no-gutters":""}},[t(B.Z,{attrs:{cols:"2"}},[e._v(" あなた : ")]),t(B.Z,[e._v(" "+e._s(a.comment)+" ")]),t(S.Z),t(B.Z,{staticClass:"shrink"},[a.approved?t(h.Z,{attrs:{disabled:"",color:"info",outlined:""}},[t("b",[e._v("承認済")])]):t(h.Z,{attrs:{disabled:"",color:"info",outlined:""},on:{click:function(t){return e.applySchedule(a.application_id)}}},[t("b",[e._v("未承認")])])],1)],1)],1)],1)])})),0)],1)],1)],1)],1)],1)},ve=[],_e={components:{Nav:H},data:()=>({selectedUser:null,users:[],followers:[],addUser:"",auth:null,messages:[{message:"こんにちは"}],applications:[],category_icons:{"指定なし":"mdi-note","遊び":"mdi-golf","ゲーム":"mdi-controller","作業":"mdi-desk","散歩":"mdi-walk","仕事":"mdi-office-building","食事":"mdi-food","ショッピング":"mdi-shopping","スポーツ":"mdi-baseball-bat","通話":"mdi-phone","デート":"mdi-heart-multiple","ドライブ":"mdi-car","飲み":"mdi-glass-wine","博物館":"mdi-palette","旅行":"mdi-train","その他":"mdi-dots-horizontal"},category_colors:{"指定なし":"yellow","遊び":"deep-orange","ゲーム":"light-blue","作業":"purple","散歩":"green","仕事":"black","食事":"red","ショッピング":"amber","スポーツ":"cyan","通話":"lime","デート":"pink","ドライブ":"indigo","飲み":"brown","博物館":"deep-purple","旅行":"teal","その他":"blue-grey"},members:[]}),mounted(){this.auth=JSON.parse(sessionStorage.getItem("user")),this.getFriends(),this.getFollowers()},methods:{async getFriends(){await T().post("/friends",{host_id:this.auth.displayName}).then((e=>{this.users=e.data})).catch((e=>{console.log(e)}))},async getFollowers(){await T().post("/friends/follower",{host_id:this.auth.displayName}).then((e=>{this.followers=e.data})).catch((e=>{console.log(e)}))},selectUser(){setTimeout(this.getInvitedSchedule,100)},async applySchedule(e){console.log("ok"),await T().post("/apply/schedule",{application_id:String(e)}).then((e=>{console.log("ok"),this.getInvitedSchedule()})).catch((e=>{console.log(e)}))},async getInvitedSchedule(){await T().post("/applications",{host_id:this.auth.displayName,user_id:this.users[this.selectedUser]}).then((e=>{this.applications=e.data})).catch((e=>{console.log(e)}))},async addFriend(e){await T().post("/register/friend",{host_id:this.auth.displayName,member_id:e}).then((e=>{this.getFriends(),this.getFollowers()})).catch((e=>{console.log(e)}))},onSubmit(){if(this.addUser!=this.auth.displayName){const e=W.Z.firestore().collection("users").doc("W6LJd07uAg2umoTzmXUL");e.get().then((async e=>{e.data()["userIds"].includes(this.addUser)?await T().post("/register/friend",{host_id:this.auth.displayName,member_id:this.addUser}).then((e=>{this.getFriends()})).catch((e=>{console.log(e)})):console.log("不正なユーザIDです")}))}else console.log("不正なユーザIDです")},formatDate(e){var t="YYYY/MM/DD hh:mm:ss",a=new Date(e);return a.setHours(a.getHours()-9),t=t.replace(/YYYY/g,a.getFullYear()),t=t.replace(/MM/g,("0"+(a.getMonth()+1)).slice(-2)),t=t.replace(/DD/g,("0"+a.getDate()).slice(-2)),t=t.replace(/hh/g,("0"+a.getHours()).slice(-2)),t=t.replace(/mm/g,("0"+a.getMinutes()).slice(-2)),t=t.replace(/ss/g,("0"+a.getSeconds()).slice(-2)),t},async getMemberImages(e){var t=W.Z.storage();const a=t.ref(`user/icon/${e}`);await a.getDownloadURL().then((e=>e)).catch((e=>"https://firebasestorage.googleapis.com/v0/b/fu-calendar-9acef.appspot.com/o/user%2Ficon%2Fsample_avatar_image.png?alt=media&token=696040e4-13e7-4822-ad6a-fa0a268f77b3"))}}},ye=_e,Ze=(0,d.Z)(ye,fe,ve,!1,null,null,null),be=Ze.exports,xe=a(5187),ke=a(6900),we=a(2540),Se=function(){var e=this,t=e._self._c;return t(r.Z,{attrs:{id:"inspire"}},[t("Nav"),t(i.Z,{staticClass:"grey lighten-3"},[t(_.Z,[t(w.Z,{attrs:{"min-height":"80vh",rounded:"lg"}},[t(Q.Z,{attrs:{"no-gutters":""}},[t(B.Z,{attrs:{cols:"3"}},[t(f.Z,{staticClass:"mx-auto white",staticStyle:{"padding-top":"10px"}},[t(te.Z,{staticStyle:{"padding-top":"20px","padding-left":"10px","padding-right":"10px"},attrs:{label:"add Group",type:"text"},scopedSlots:e._u([{key:"append-outer",fn:function(){return[t(h.Z,{attrs:{color:"primary"},on:{click:e.onSubmit}},[e._v("追加")])]},proxy:!0}]),model:{value:e.addGroup,callback:function(t){e.addGroup=t},expression:"addGroup"}}),t(Z.Z,{staticStyle:{height:"71vh","overflow-y":"auto"},attrs:{color:"blue-grey lighten-5"}},[t(F.Z,{attrs:{color:"primary"},model:{value:e.selectedGroup,callback:function(t){e.selectedGroup=t},expression:"selectedGroup"}},e._l(e.groups,(function(a){return t(b.Z,{key:a,on:{click:e.selectGroup}},[t(G.Z,[t(y.Z,[e._v("mdi-account-multiple")])],1),t(x.km,[t(x.V9,[e._v(e._s(a))])],1)],1)})),1)],1)],1)],1),t(B.Z,[t(Z.Z,{attrs:{"three-line":""}},[e._l(e.members,(function(a,s){return[a.header?t("div",[t(we.Z,{key:a.header},[e._v(" "+e._s(a.header)+" "),t(S.Z),t(h.Z,{staticClass:"white--text",staticStyle:{"margin-left":"10px"},attrs:{color:"light-blue darken-1"},on:{click:e.getMembers}},[t("b",[e._v("更新")])]),t(h.Z,{staticClass:"white--text",staticStyle:{"margin-left":"10px"},attrs:{color:"red darken-1"},on:{click:e.deleteGroup}},[t("b",[e._v("削除")])])],1)],1):a.divider?t(ge.Z,{key:s,attrs:{inset:a.inset}}):t(b.Z,{key:a.title,staticStyle:{width:"75%"}},[t(ke.Z,[t(A.Z,{attrs:{src:a.avatar}})],1),t(x.km,{staticStyle:{"margin-top":"-13px","margin-left":"20px"}},[t(x.V9,{domProps:{innerHTML:e._s(a.title)}})],1),t(xe.Z,[t(h.Z,{attrs:{icon:""},on:{click:function(t){return e.deleteMember(a.title)}}},[t(y.Z,{attrs:{color:"red darken-3"}},[e._v("mdi-window-close")])],1)],1)],1)]}))],2),null!=e.selectedGroup?t("div",[t(b.Z,{staticStyle:{width:"70%","margin-top":"5px","margin-left":"12px","margin-right":"11px"}},[t(x.km,{staticClass:"grey--text"},[t(ee.Z,{attrs:{items:e.friends,dense:"",color:"blue darken-2",label:"新規メンバーを追加","prepend-icon":"mdi-account-multiple","append-outer-icon":"mdi-send",required:""},on:{"click:append-outer":function(t){return e.addMember()}},model:{value:e.member,callback:function(t){e.member=t},expression:"member"}})],1)],1)],1):e._e()],1)],1)],1)],1)],1)],1)},De=[],Ce={components:{Nav:H},data:()=>({selectedGroup:null,groups:[],addGroup:"",auth:null,memberNames:[],member:"",members:[{header:"グループメンバー"}],friends:[]}),mounted(){this.auth=JSON.parse(sessionStorage.getItem("user")),this.getFriends(),this.getGroups(),this.getMembers()},methods:{async getFriends(){await T().post("/friends",{host_id:this.auth.displayName}).then((e=>{this.friends=e.data})).catch((e=>{console.log(e)}))},async getGroups(){await T().post("/groups",{host_id:this.auth.displayName}).then((e=>{this.groups=[],e.data.forEach((e=>{this.groups.push(e.group_name)})),this.addGroup=""})).catch((e=>{console.log(e)}))},selectGroup(){setTimeout(this.getMembers,100)},async getMembers(){await T().post("/group/members",{host_id:this.auth.displayName,group_name:this.groups[this.selectedGroup]}).then((e=>{this.memberNames=[],e.data.forEach((e=>{this.memberNames.push(e.member_id)})),this.getMemberImages()})).catch((e=>{pass}))},async getMemberImages(){this.members=[{header:"グループメンバー"}];var e=j.storage();for(const t of this.memberNames){const a=e.ref(`user/icon/${t}`);await a.getDownloadURL().then((e=>{this.members.push({avatar:e,title:t}),this.members.push({divider:!0,inset:!0})})).catch((e=>{this.members.push({avatar:"https://firebasestorage.googleapis.com/v0/b/fu-calendar-9acef.appspot.com/o/user%2Ficon%2Fsample_avatar_image.png?alt=media&token=696040e4-13e7-4822-ad6a-fa0a268f77b3",title:t}),this.members.push({divider:!0,inset:!0})}))}},async deleteGroup(){await T().post("/delete/group",{host_id:this.auth.displayName,group_name:this.groups[this.selectedGroup]}).then((e=>{this.getGroups()})).catch((e=>{pass}))},async deleteMember(e){await T().post("/delete/group/member",{host_id:this.auth.displayName,group_name:this.groups[this.selectedGroup],member_id:e}).then((e=>{this.getMembers()})).catch((e=>{pass}))},async addMember(){this.memberNames.includes(this.member)?this.member="":await T().post("/register/group/member",{host_id:this.auth.displayName,group_name:this.groups[this.selectedGroup],member_id:this.member}).then((e=>{this.getMembers()})).catch((e=>{pass}))},async onSubmit(){await T().post("/register/group",{host_id:this.auth.displayName,group_name:this.addGroup}).then((e=>{this.getGroups()})).catch((e=>{pass})),this.dialog=!1}}},Ee=Ce,Me=(0,d.Z)(Ee,Se,De,!1,null,null,null),Oe=Me.exports,Te=a(344),Ne=a(4127),Ie=a(7955),Ue=a(255),$e=a(2348),Ae=a(400),Pe=a(1214),Fe=a(7394),Ge=function(){var e=this,t=e._self._c;return t(r.Z,{attrs:{id:"inspire"}},[t("Nav"),t(i.Z,{staticClass:"grey lighten-3"},[t(_.Z,[t(Pe.Z,{attrs:{multiple:""},model:{value:e.panel,callback:function(t){e.panel=t},expression:"panel"}},[t(Ue.Z,[t(Ae.Z,{scopedSlots:e._u([{key:"default",fn:function({open:a}){return[t(Q.Z,{attrs:{"no-gutters":""}},[t(B.Z,{staticClass:"text--secondary",attrs:{cols:"8"}},[t(Fe.Z5,{attrs:{"leave-absolute":""}},[a?t("span",[e._v("検索するフレンドを入力してください")]):t("div",[t(Q.Z,{staticStyle:{width:"100%"},attrs:{"no-gutters":""}},[t(B.Z,{attrs:{cols:"4"}},[e._v(" 対象： ")])],1),t(Q.Z,{staticStyle:{width:"100%","margin-top":"20px"}},[t(B.Z,[t("b",[e._v("フレンド　：")]),t(Ie.Z,{attrs:{column:"","active-class":"primary--text"}},e._l(e.value_friends,(function(a){return t("div",{key:a},["すべて選択"!=a?t("div",[t(Ne.Z,{attrs:{"x-small":"",color:"primary"}},[e._v(" "+e._s(a)+" ")])],1):e._e()])})),0)],1)],1),t(Q.Z,{staticStyle:{width:"100%"}},[t(B.Z,[t("b",[e._v("カテゴリー：")]),t(Ie.Z,{attrs:{column:"","active-class":"primary--text"}},e._l(e.value_categorys,(function(a){return t("div",{key:a},["すべて選択"!=a?t("div",[t(Ne.Z,{attrs:{"x-small":"",dark:"",color:e.category_colors[a]}},[e._v(" "+e._s(a)+" ")])],1):e._e()])})),0)],1)],1)],1)])],1)],1)]}}])}),t($e.Z,{staticStyle:{"margin-left":"20%"}},[t(Q.Z,{attrs:{justify:"space-around","no-gutters":""}},[t(B.Z,{attrs:{cols:"8"}},[t(Te.Z,{attrs:{items:e.users,dense:"",filled:"","small-chips":"",multiple:"",label:"Frieds"},on:{change:function(t){return e.selectFriend()}},model:{value:e.value_friends,callback:function(t){e.value_friends=t},expression:"value_friends"}})],1),t(S.Z)],1),t(Q.Z,{attrs:{justify:"space-around","no-gutters":""}},[t(B.Z,{attrs:{cols:"8"}},[t(Te.Z,{attrs:{items:e.categorys,dense:"",filled:"","small-chips":"",multiple:"",label:"Categorys"},on:{change:function(t){return e.selectCategory()}},model:{value:e.value_categorys,callback:function(t){e.value_categorys=t},expression:"value_categorys"}})],1),t(h.Z,{staticStyle:{"margin-left":"60px"},attrs:{color:"primary","x-large":""},on:{click:e.onSubmit}},[e._v("検索")]),t(S.Z)],1)],1)],1)],1),t(w.Z,{attrs:{"min-height":"70vh",rounded:"lg"}},[t(w.Z,{staticClass:"d-flex",attrs:{tile:"",height:"64"}},[t(D.Z,{attrs:{flat:""}},[t(h.Z,{staticClass:"mr-4",attrs:{outlined:"",color:"grey darken-2"},on:{click:e.setToday}},[e._v(" Today ")]),t(h.Z,{attrs:{fab:"",text:"",small:"",color:"grey darken-2"},on:{click:e.prev}},[t(y.Z,{attrs:{small:""}},[e._v(" mdi-chevron-left ")])],1),t(h.Z,{attrs:{fab:"",text:"",small:"",color:"grey darken-2"},on:{click:e.next}},[t(y.Z,{attrs:{small:""}},[e._v(" mdi-chevron-right ")])],1),e.$refs.calendar?t(C.qW,[e._v(" "+e._s(e.$refs.calendar.title)+" ")]):e._e(),t(S.Z),t(k.Z,{attrs:{bottom:"",right:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t(h.Z,e._g(e._b({attrs:{outlined:"",color:"grey darken-2"}},"v-btn",s,!1),a),[t("span",[e._v(e._s(e.typeToLabel[e.type]))]),t(y.Z,{attrs:{right:""}},[e._v(" mdi-menu-down ")])],1)]}}])},[t(Z.Z,[t(b.Z,{on:{click:function(t){e.type="day"}}},[t(x.V9,[e._v("Day")])],1),t(b.Z,{on:{click:function(t){e.type="week"}}},[t(x.V9,[e._v("Week")])],1),t(b.Z,{on:{click:function(t){e.type="month"}}},[t(x.V9,[e._v("Month")])],1)],1)],1)],1)],1),t(w.Z,{attrs:{height:"600"}},[t(g.Z,{ref:"calendar",attrs:{type:e.type,events:e.events,"event-overlap-mode":e.mode,"event-overlap-threshold":30},on:{"click:event":e.showEvent},model:{value:e.focus,callback:function(t){e.focus=t},expression:"focus"}}),t(k.Z,{attrs:{"close-on-content-click":!1,activator:e.selectedElement,"offset-x":""},model:{value:e.selectedOpen,callback:function(t){e.selectedOpen=t},expression:"selectedOpen"}},[t(f.Z,{attrs:{color:"grey lighten-4","min-width":"350px",flat:""}},[t(D.Z,{attrs:{color:e.selectedEvent.color,dark:""}},[t(y.Z,{staticStyle:{"margin-bottom":"3px","margin-right":"20px"}},[e._v(e._s(e.category_icons[e.selectedEvent.category]))]),t(C.qW,{domProps:{innerHTML:e._s(e.selectedEvent.name)}}),t(S.Z),t("h5",{domProps:{innerHTML:e._s(e.selectedEvent.user_id)}})],1),t(v.ZB,[t("b",[e._v(" "+e._s(e.selectedEvent.content)+" ")]),t("br"),e._v(" START　: "+e._s(e.formatDate(e.selectedEvent.start))+" "),t("br"),e._v(" END　　: "+e._s(e.formatDate(e.selectedEvent.end))+" ")]),t(v.h7,[t(ae.Z,{staticClass:"mx-2",attrs:{label:"comment",rows:"1","prepend-icon":"mdi-comment"},model:{value:e.comment,callback:function(t){e.comment=t},expression:"comment"}}),t(h.Z,{attrs:{disabled:e.scheduleValid,color:"primary"},on:{click:function(t){return e.inviteSchedule(e.selectedEvent.id)}}},[t(y.Z,{staticStyle:{"margin-right":"10px"}},[e._v("mdi-send-circle")]),t("b",[e._v("誘う")])],1)],1)],1)],1)],1)],1)],1)],1)],1)},Re=[],Le={components:{Nav:H},data:()=>({panel:[0],focus:"",type:"month",typeToLabel:{month:"Month",week:"Week",day:"Day"},mode:"column",value_friends:null,value_friends_before:[],value_categorys:null,value_categorys_before:[],users:["すべて選択"],selectedEvent:{},selectedElement:null,selectedOpen:!1,categorys:["すべて選択","指定なし","遊び","ゲーム","作業","散歩","仕事","食事","ショッピング","スポーツ","通話","デート","ドライブ","飲み","博物館","旅行","その他"],category_icons:{"指定なし":"mdi-note","遊び":"mdi-golf","ゲーム":"mdi-controller","作業":"mdi-desk","散歩":"mdi-walk","仕事":"mdi-office-building","食事":"mdi-food","ショッピング":"mdi-shopping","スポーツ":"mdi-baseball-bat","通話":"mdi-phone","デート":"mdi-heart-multiple","ドライブ":"mdi-car","飲み":"mdi-glass-wine","博物館":"mdi-palette","旅行":"mdi-train","その他":"mdi-dots-horizontal"},category_colors:{"指定なし":"yellow","遊び":"deep-orange","ゲーム":"light-blue","作業":"purple","散歩":"green","仕事":"black","食事":"red","ショッピング":"amber","スポーツ":"cyan","通話":"lime","デート":"pink","ドライブ":"indigo","飲み":"brown","博物館":"deep-purple","旅行":"teal","その他":"blue-grey"},events:[],auth:null,scheduleValid:!1,comment:""}),mounted(){this.$refs.calendar.checkChange(),this.auth=JSON.parse(sessionStorage.getItem("user")),this.getFriends()},methods:{async getFriends(){await T().post("/friends",{host_id:this.auth.displayName}).then((e=>{this.users.push(...e.data)})).catch((e=>{console.log(e)}))},setToday(){this.focus=""},prev(){this.$refs.calendar.prev()},next(){this.$refs.calendar.next()},selectFriend(){-1!==this.value_friends.indexOf("すべて選択")&-1===this.value_friends_before.indexOf("すべて選択")&&(this.value_friends=this.users),-1===this.value_friends.indexOf("すべて選択")&-1!==this.value_friends_before.indexOf("すべて選択")&&(this.value_friends=[]),-1!==this.value_friends.indexOf("すべて選択")&this.value_friends_before.length===this.users.length&&(this.value_friends=this.value_friends.filter((e=>"すべて選択"!==e))),this.value_friends_before=this.value_friends},selectCategory(){-1!==this.value_categorys.indexOf("すべて選択")&-1===this.value_categorys_before.indexOf("すべて選択")&&(this.value_categorys=this.categorys),-1===this.value_categorys.indexOf("すべて選択")&-1!==this.value_categorys_before.indexOf("すべて選択")&&(this.value_categorys=[]),-1!==this.value_categorys.indexOf("すべて選択")&this.value_categorys_before.length===this.categorys.length&&(this.value_categorys=this.value_categorys.filter((e=>"すべて選択"!==e))),this.value_categorys_before=this.value_categorys},showEvent({nativeEvent:e,event:t}){const a=()=>{this.selectedEvent=t,this.getApproved(this.selectedEvent.id),this.selectedElement=e.target,requestAnimationFrame((()=>requestAnimationFrame((()=>this.selectedOpen=!0))))};this.selectedOpen?(this.selectedOpen=!1,requestAnimationFrame((()=>requestAnimationFrame((()=>a()))))):a(),e.stopPropagation()},formatDate(e){var t="YYYY/MM/DD hh:mm:ss",a=new Date(e);return t=t.replace(/YYYY/g,a.getFullYear()),t=t.replace(/MM/g,("0"+(a.getMonth()+1)).slice(-2)),t=t.replace(/DD/g,("0"+a.getDate()).slice(-2)),t=t.replace(/hh/g,("0"+a.getHours()).slice(-2)),t=t.replace(/mm/g,("0"+a.getMinutes()).slice(-2)),t=t.replace(/ss/g,("0"+a.getSeconds()).slice(-2)),t},async onSubmit(){if(-1!==this.value_friends.indexOf("すべて選択"))var e=this.value_friends.slice(1);else e=this.value_friends;if(-1!==this.value_categorys.indexOf("すべて選択"))var t=this.value_categorys.slice(1);else t=this.value_categorys;await T().post("/schedules/invited",{host_id:this.auth.displayName,members:e,categorys:t}).then((e=>{this.events=[],e.data.forEach((e=>{var t={id:e.ID,user_id:e.user_id,name:e.title,start:new Date(e.start.slice(0,-1)),end:new Date(e.end.slice(0,-1)),group:e.group,category:e.category,content:e.content,color:this.category_colors[e.category],timed:!0};this.events.push(t)}))})).catch((e=>{console.log(e)})),this.panel=[1]},async getApproved(e){await T().post("application/status",{schedule_id:String(e),user_id:this.auth.displayName}).then((e=>{0==e.data.ID?this.scheduleValid=!1:this.scheduleValid=!0})).catch((e=>{console.log(e)}))},async inviteSchedule(e){await T().post("invite/schedule",{schedule_id:String(e),user_id:this.auth.displayName,comment:this.comment}).then((e=>{this.selectedOpen=!1,this.comment=""})).catch((e=>{console.log(e)}))}}},Ye=Le,We=(0,d.Z)(Ye,Ge,Re,!1,null,null,null),Ve=We.exports,je=a(5125),qe=function(){var e=this,t=e._self._c;return t(r.Z,[t(i.Z,{staticClass:"grey lighten-3"},[t("div",{staticStyle:{"margin-top":"50px"}},[t("div",{staticStyle:{"text-align":"center"}},[t("br"),t("img",{attrs:{width:"200px",src:a(6949)}}),t("br"),t("br")]),t(f.Z,{staticClass:"mx-auto mt-5 blue-grey--text text--darken-2",attrs:{width:"400px"}},[t("br"),t(v.EB,{staticClass:"justify-center"},[t("h1",{staticClass:"display-1"},[e._v("新規登録")])]),t(ge.Z),t(v.ZB,[t(je.Z,{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t(te.Z,{attrs:{"prepend-icon":"mdi-account",label:"User ID",rules:e.userIdRules,required:""},model:{value:e.user_id,callback:function(t){e.user_id=t},expression:"user_id"}}),t(te.Z,{attrs:{"prepend-icon":"mdi-email",label:"Email",rules:e.emailRules,required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),t(te.Z,{attrs:{type:e.showPassword?"text":"password","prepend-icon":"mdi-lock","append-icon":e.showPassword?"mdi-eye":"mdi-eye-off",label:"Password",rules:e.passwordRules,required:""},on:{"click:append":function(t){e.showPassword=!e.showPassword}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),t(v.h7,{staticClass:"justify-center"},[t(h.Z,{staticClass:"info",attrs:{disabled:!e.valid},on:{click:e.submit}},[e._v("登録")])],1),e.errorMessage?t(he.Z,{staticStyle:{"text-align":"center","margin-top":"30px"},attrs:{dense:"",outlined:"",type:"error",elevation:"1"}},[e._v(" "+e._s(e.errorMessage)+" ")]):e._e()],1)],1),t(ge.Z),t("br"),t("p",{staticClass:"text-center"},[e._v("すでにアカウントを"),t("br"),e._v("お持ちの方は"),t("router-link",{attrs:{to:"/signin"}},[e._v("こちら")])],1),t("br")],1)],1)])],1)},ze=[],Je={name:"Signup",data:function(){return{showPassword:!1,user_id:"",userIdRules:[e=>!!e||"ユーザIDを入力してください",e=>6<=e.length||"6文字以上で入力してください"],email:"",emailRules:[e=>!!e||"メールアドレスを入力してください",e=>/.+@.+/.test(e)||"不正なメールアドレスです"],password:"",password_confirm:"",passwordRules:[e=>!!e||"パスワードを入力してください",e=>7<=e.length||"8文字以上で入力してください"],errorMessage:""}},computed:{},methods:{submit(){const e=W.Z.firestore().collection("users").doc("W6LJd07uAg2umoTzmXUL");e.get().then((e=>{e.exists?e.data()["userIds"].includes(this.user_id)?this.errorMessage="既に使用されていユーザIDです":W.Z.auth().createUserWithEmailAndPassword(this.email,this.password).then((async e=>{await e.user.updateProfile({displayName:this.user_id}),await W.Z.firestore().collection("users").doc("vKmx9TKToLQ7m5u6ovIA").update({[this.user_id]:this.email}),await W.Z.firestore().collection("users").doc("W6LJd07uAg2umoTzmXUL").update({userIds:W.Z.firestore.FieldValue.arrayUnion(this.user_id)}),localStorage.message="ユーザの新規作成に成功しました",this.$router.push("/signin")})).catch((e=>{this.errorMessage="ユーザの新規作成に失敗しました"})):console.log("No such data")}))}}},He=Je,Be=(0,d.Z)(He,qe,ze,!1,null,null,null),Ke=Be.exports,Xe=function(){var e=this,t=e._self._c;return t(r.Z,[t(i.Z,{staticClass:"grey lighten-3"},[t("div",{staticStyle:{"margin-top":"50px"}},[t("div",{staticStyle:{"text-align":"center"}},[t("br"),t("img",{attrs:{width:"200px",src:a(6949)}}),t("br"),t("br")]),t(f.Z,{staticClass:"mx-auto mt-5 blue-grey--text text--darken-2",attrs:{width:"400px"}},[t("br"),t(v.EB,{staticClass:"justify-center"},[t("h1",{staticClass:"display-1"},[e._v("ログイン")])]),t(ge.Z),t(v.ZB,[t(je.Z,{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t(te.Z,{attrs:{"prepend-icon":"mdi-email",label:"Email",rules:e.emailRules,required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),t(te.Z,{attrs:{type:e.showPassword?"text":"password","prepend-icon":"mdi-lock","append-icon":e.showPassword?"mdi-eye":"mdi-eye-off",label:"Password",rules:e.passwordRules,required:""},on:{"click:append":function(t){e.showPassword=!e.showPassword}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),t(v.h7,{staticClass:"justify-center"},[t(h.Z,{staticClass:"info",attrs:{disabled:!e.valid},on:{click:e.submit}},[e._v("ログイン")])],1),e.message?t(he.Z,{staticStyle:{"text-align":"center","margin-top":"30px"},attrs:{dense:"",text:"",type:"success"}},[e._v(" "+e._s(e.message)+" ")]):e._e(),e.errorMessage?t(he.Z,{staticStyle:{"text-align":"center","margin-top":"30px"},attrs:{dense:"",outlined:"",type:"error",elevation:"1"}},[e._v(" "+e._s(e.errorMessage)+" ")]):e._e()],1)],1),t(ge.Z),t("br"),t("p",{staticClass:"text-center"},[e._v("アカウントを"),t("br"),e._v("お持ちでない方は"),t("router-link",{attrs:{to:"/signup"}},[e._v("こちら")])],1),t("br")],1)],1)])],1)},Qe=[],et={name:"Signin",data:function(){return{showPassword:!1,email:"",emailRules:[e=>!!e||"メールアドレスを入力してください",e=>/.+@.+/.test(e)||"不正なメールアドレスです"],password:"",passwordRules:[e=>!!e||"パスワードを入力してください",e=>7<=e.length||"8文字以上で入力してください"],message:"",errorMessage:""}},mounted(){localStorage.message&&(this.message=localStorage.message,localStorage.message="")},computed:{},methods:{submit(){j.auth().signInWithEmailAndPassword(this.email,this.password).then((e=>{const t={displayName:e.user.displayName,email:e.user.email,uid:e.user.uid,refreshToken:e.user.refreshToken,photoURL:e.user.photoURL};sessionStorage.setItem("user",JSON.stringify(t)),this.$router.push("/")})).catch((e=>{console.log("fail"),this.errorMessage="ログインに失敗しました"}))}}},tt=et,at=(0,d.Z)(tt,Xe,Qe,!1,null,null,null),st=at.exports;s.ZP.use(m.Z);const rt=[{path:"/",name:"home",component:me,meta:{requiresAuth:!0}},{path:"/friend",name:"Friend",component:be},{path:"/group",name:"Group",component:Oe},{path:"/search",name:"Search",component:Ve},{path:"/signin",name:"SignIn",component:st},{path:"/signup",name:"SignUp",component:Ke}],it=new m.Z({base:"",routes:rt});it.beforeEach(((e,t,a)=>{const s=e.matched.some((e=>e.meta.requiresAuth));s?j.auth().onAuthStateChanged((t=>{t?a():a({path:"/signin",query:{redirect:e.fullPath}})})):a()}));var ot=it,nt=a(1705);s.ZP.use(nt.Z);var lt=new nt.Z({});s.ZP.config.productionTip=!1,T().defaults.baseURL="http://3.112.17.9:8888/",T().defaults.withCredentials=!0,new s.ZP({router:ot,vuetify:lt,render:e=>e(p)}).$mount("#app")},6949:function(e,t,a){e.exports=a.p+"img/logo.bcc4f49c.png"},3976:function(e,t,a){e.exports=a.p+"img/logo_small.939adb69.png"}},t={};function a(s){var r=t[s];if(void 0!==r)return r.exports;var i=t[s]={id:s,loaded:!1,exports:{}};return e[s].call(i.exports,i,i.exports,a),i.loaded=!0,i.exports}a.m=e,function(){var e=[];a.O=function(t,s,r,i){if(!s){var o=1/0;for(d=0;d<e.length;d++){s=e[d][0],r=e[d][1],i=e[d][2];for(var n=!0,l=0;l<s.length;l++)(!1&i||o>=i)&&Object.keys(a.O).every((function(e){return a.O[e](s[l])}))?s.splice(l--,1):(n=!1,i<o&&(o=i));if(n){e.splice(d--,1);var c=r();void 0!==c&&(t=c)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[s,r,i]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p=""}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var r,i,o=s[0],n=s[1],l=s[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(r in n)a.o(n,r)&&(a.m[r]=n[r]);if(l)var d=l(a)}for(t&&t(s);c<o.length;c++)i=o[c],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(d)},s=self["webpackChunkclient"]=self["webpackChunkclient"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(7360)}));s=a.O(s)})();
//# sourceMappingURL=app.885eb5c6.js.map